<h1>Edycja mieszkania</h1>
<mat-card class="card">
    <form [formGroup]="apartmentForm">
        <app-apartment-form [parentForm]="apartmentForm"></app-apartment-form>
        <div class="btn">
            <button mat-flat-button style="background-color: black; color: white;" (click)="submit()" [disabled]="!apartmentForm.dirty && !this.imageUploaded">Zapisz</button>
            <button mat-flat-button color="warn" (click)="confirmDelete(apartment.id)">Usuń</button>
        </div>
        <div formArrayName="rentedObjects">
            <div *ngFor="let rentedObject of getRentedObjectsFormArray.controls; let i = index" [formGroupName]="i">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'rentedObject.name' | translate }}</mat-label>
                <input matInput formControlName="rentedObjectName">
                <mat-error *ngIf="rentedObject.get('rentedObjectName')?.invalid && (rentedObject.get('rentedObjectName')?.dirty || rentedObject.get('rentedObjectName')?.touched)">
                  {{ 'required' | translate }}
                </mat-error>
              </mat-form-field>
            </div>
        </div>
    </form>
    <img *ngIf="image" src="{{'/api/data/apartmentImage/' + image}}" width="220" height="165">
    <form [formGroup]="imageForm" (submit)="uploadFile()">
      <input type="file" [accept]="requredFileTypes" (change)="onFileChange($event)">
      <button mat-flat-button style="background-color: black; color: white;" [disabled]="!this.imageSelected">Wgraj zdjęcie</button>
    </form>
</mat-card>

